<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="mycart_btn">장바구니</button>

<input type="hidden" value="${login.userid}" id="login_userid">

<div class="container">
	
	<c:set value="${cartMap.cartlist}" var="cartlist"/>
	<c:set value="${cartMap.productList}" var="productList"/>
		
		<div class="row qnas" style="text-align: center;">
			<h1 class="page-header">장바구니</h1>
			<table class="table table-hover" style="width: 70%; margin: auto; border-bottom: 1px solid #D5D5D5;">
				<thead>
					<tr>
						<th colspan="2" style="text-align: center;">상품명</th>
						<th>가격</th>
						<th>수량</th>
						<th>상품정보</th>
					</tr>
				</thead>
				<tbody>
					<c:choose><c:when test="${productList != null}">
					<c:forEach items="${productList}" var="vo" varStatus="status">
						<tr>
							<td><img alt="thumbnail" src="/resources/upload${vo.filename}"></td>
							<td>${vo.productName}</td>
							<td><fmt:formatNumber type="number" value="${vo.price}"/>&nbsp;원</td>
							<td><select>
								<c:forEach var="count" begin="1" end="${vo.stock > 5 ? 5 : vo.stock}">
								<option>${count}</option>
								</c:forEach>
							</select></td>
							<td>${vo.productInfo}</td>
						</tr>
					</c:forEach>
					</c:when>
					<c:otherwise>
						<tr><td colspan="5"><h3>장바구니에 내역이 없습니다.</h3></td></tr>
					</c:otherwise></c:choose>
				</tbody>
			</table>
		</div>
		
		<div class="row" style="text-align: center; margin: 80px 0;">
			<button class="btn btn-default">주문하기</button>
			<button class="btn btn-default">쇼핑을 계속하기</button>
		</div>

	</div>


<script type="text/javascript">

    var userid = $("#login_userid").val();
   
    $("#mycart_btn").click(function(event) {
	event.preventDefault();
	location.assign("/order/mycart/" + userid);			
	});
</script>

</body>
</html>